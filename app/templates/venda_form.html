{% extends "base.html" %}

{% block conteudo %}
<h1 class="titulo-pagina">Nova Venda</h1>

<form method="post" action="/vendas/nova">
    <div class="form-grupo">
        <label for="cliente_id">Cliente:</label>
        <select name="cliente_id" required>
            {% for cliente in clientes %}
                <option value="{{ cliente.id }}">{{ cliente.nome }}</option>
            {% endfor %}
        </select>
    </div>

    <div id="itens-container">
        <div class="form-grupo item-venda">
            <label>Produto:</label>
            <select name="produto_id">
                {% for produto in produtos %}
                    <option value="{{ produto.id }}" data-unidade="{{ produto.unidade }}">{{ produto.nome }}</option>
                {% endfor %}
            </select>

            <label>Quantidade:</label>
            <input type="text" name="quantidade" placeholder="Ex: 1 ou 0.5 ou 32x120">
        </div>
    </div>

    <button type="button" onclick="adicionarItem()">+ Adicionar Produto</button>
    <br><br>

    <label>Forma de Pagamento:</label>
    <select name="forma_pagamento" required>
        <option value="avista">Ã€ Vista</option>
        <option value="prazo">A Prazo</option>
    </select>

    <br><br>
    <button type="submit">Finalizar Venda</button>
</form>

<script>
    function adicionarItem() {
        const container = document.getElementById('itens-container');
        const item = document.querySelector('.item-venda');
        const novoItem = item.cloneNode(true);
        container.appendChild(novoItem);
    }
</script>
{% endblock %}
